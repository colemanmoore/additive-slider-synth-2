(this["webpackJsonpadditive-slider-synth-2"]=this["webpackJsonpadditive-slider-synth-2"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),c=n(3),s=n.n(c),o=(n(11),n(1)),r=(n(12),n(13),a.a.createContext()),u=function(e){var t,n=e.sliderHeight,a=void 0===n?100:n,c=e.initialLevel,s=void 0===c?0:c,r=Object(i.useState)(5),u=Object(o.a)(r,2),v=u[0],l=u[1],h=Object(i.useState)(s),f=Object(o.a)(h,2),d=f[0],m=f[1],b=function e(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",e)},y=function(e){var n=e.pageX,i=e.layerY;m((a-i)/a);var c,s,o,r=n-t;0!==r&&l((c=0,s=v+r,o=10,Math.min(Math.max(c,s),o)))};return[d,m,v,function(e){var n=e.pageX;t=n,document.addEventListener("mousemove",y),document.addEventListener("mouseup",b)},b,function(){m(0===d?.5:0)}]};var v=function(e){var t=e.pid,n=e.noteOn,c=Object(i.useContext)(r),s=c.voice(t),v=u({sliderHeight:300,meterLevel:s.vca.gain.value}),l=Object(o.a)(v,6),h=l[0],f=(l[1],l[2]),d=l[3],m=l[4],b=l[5];return Object(i.useEffect)((function(){isNaN(h)||c.voiceGain(t,h)}),[h]),Object(i.useEffect)((function(){c.voiceDetune(t,f)}),[f]),a.a.createElement("div",{className:"Slider",onMouseDown:d,onMouseUp:m,onDoubleClick:b},a.a.createElement("div",{className:"SliderBody",style:{left:"".concat(f,"px")}},a.a.createElement("div",{className:"LevelMeter",style:{height:"".concat(300*h,"px"),background:function(){return n?"#b3dbac":"#ff4499"}}})))};var l=function(){var e=Object(i.useContext)(r),t=Object(i.useRef)(null),n=Object(i.useState)(!1),c=Object(o.a)(n,2),s=c[0],u=c[1];return Object(i.useEffect)((function(){e.masterGain>0&&(u(!0),setTimeout((function(){return u(!1)}),100))}),[e.masterGain]),Object(i.useEffect)((function(){t.current.focus()}),[]),a.a.createElement("div",{className:"App",tabIndex:"0",ref:t,onKeyDown:function(t){var n=t.keyCode;e.keyboardInput(n)},onKeyUp:function(){e.keyboardInput(e.OFF)}},a.a.createElement("div",{className:"spectrumControls"},Object.keys(e.voices).map((function(e){return a.a.createElement(v,{key:e,pid:e,noteOn:s})}))),a.a.createElement("div",{className:"hint"},"Double-click a slider to turn on a harmonic"),a.a.createElement("div",{className:"hint"},"Press a key from the middle row of your keyboard: ASDFGHJKL"))},h=n(4),f=n(5),d=function(){function e(t){Object(h.a)(this,e),this.OFF="OFF",this.ctx=null,this.voices={},this.numberOfVoices=0,this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.numberOfVoices=t;for(var n=0;n<t;n++){var i=this.ctx.createGain();i.gain.value=0,i.connect(this.masterGain);var a=this.ctx.createOscillator();a.type="sine",a.frequency.value=0,a.start(),a.connect(i),this.voices[n]={osc:a,vca:i}}this.masterGain.connect(this.ctx.destination)}return Object(f.a)(e,[{key:"voice",value:function(e){return this.voices[e]}},{key:"changeMasterGain",value:function(e){this.masterGain.gain.cancelScheduledValues(this.ctx.currentTime),this.masterGain.gain.setTargetAtTime(e,this.ctx.currentTime,.2)}},{key:"noteChange",value:function(e){var t=this;Object.keys(this.voices).filter((function(e){return!isNaN(parseInt(e))})).forEach((function(n){t.voice(n).osc.frequency.value=e*(parseInt(n)+1)}))}},{key:"keyboardInput",value:function(e){e!==this.OFF?this.keyToFrequency(e)&&(this.noteChange(this.keyToFrequency(e)/4),this.changeMasterGain(1)):this.changeMasterGain(0)}},{key:"voiceGain",value:function(e,t){this.voices[e]&&(this.voices[e].vca.gain.value=t/this.numberOfVoices)}},{key:"voiceDetune",value:function(e,t){this.voices[e]&&(this.voices[e].osc.detune.value=5*t)}},{key:"keyToFrequency",value:function(e){var t={65:"a",83:"d",68:"e",70:"fsh",71:"g",72:"a",74:"b",75:"c8",76:"d8"};if(t[e])return{c:261.6,csh:277.2,d:297.7,dsh:311.1,e:329.6,f:349.2,fsh:370,g:392,gsh:415.3,a:440,ash:466.2,b:493.9,c8:523.2,d8:595.4}[t[e]]}}]),e}();s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(r.Provider,{value:new d(13)},a.a.createElement(l,null))),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.8a923453.chunk.js.map